import { defaultErrorMessage } from 'constants/defaults';
import { httpGet } from 'helpers/network';
import { checkResponse } from 'helpers/session';

export const newsRequest = () => ({
    type: 'NEWS_GET_REQUEST',
});

export const newsSuccess = (data) => ({
    type: 'NEWS_GET_SUCCESS',
    payload: data,
});

export const newsFailure = (errorMessage = defaultErrorMessage) => ({
    type: 'NEWS_GET_FAILURE',
    payload: { errorMessage },
    error: true,
});

export function getNews() {

    return (dispatch) => {

        dispatch(newsRequest());

        return httpGet(`news`)
            .then((response) => {
                if (checkResponse(response)) {
                    dispatch(newsSuccess(response.data));
                } else {
                    dispatch(newsFailure(response.message));
                }
            })
            .catch(() => {
                dispatch(newsFailure());
            });
    };
}